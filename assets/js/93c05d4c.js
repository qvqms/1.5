"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[3774],{36683:(e,l,t)=>{t.d(l,{Z:()=>p});var o=t(64139),a=t(57268),n=t(94209);const s={class:"hi-widget-dialog absolute inset-0 z-20 flex h-full w-full min-w-[840px] items-center justify-center"},i={class:"pointer-events-auto relative z-[-1] h-full w-full bg-color-b4"},r={class:"pointer-events-auto absolute top-[20px] left-[20px] flex"},c=[(e=>((0,a.dD)("data-v-c8f1aacc"),e=e(),(0,a.Cn)(),e))((()=>(0,a._)("i",{class:"iconfont icon-close_window_icon text-[12px] text-color-white opacity-0 transition-opacity group-hover:opacity-100"},null,-1)))],u=(0,a.aZ)({inheritAttrs:!1}),d=(0,a.aZ)({...u,props:{fullScreen:{type:Boolean,default:!1},fullScreenBtn:{type:Boolean,default:!0}},emits:["on-close","on-fullscreen"],setup(e,l){let{emit:t}=l;const u=e,d=()=>{t("on-close")},p=()=>{t("on-fullscreen",!u.fullScreen)};return(e,l)=>{const t=o.Z;return(0,a.wg)(),(0,a.iD)("section",s,[(0,a.Wm)(t,{show:!0,opacity:60,"z-index":-2,onClick:d}),(0,a._)("div",{class:(0,n.C_)(["container pointer-events-none max-h-full max-w-full overflow-hidden",[u.fullScreen?"h-full w-full":"h-[640px] max-h-[calc(100vh-40px)] w-[1024px] max-w-[calc(100vw-40px)] rounded-[12px]",e.$attrs.class]])},[(0,a._)("div",i,[(0,a.WI)(e.$slots,"default"),(0,a._)("div",r,[(0,a._)("div",{class:"group flex h-[16px] w-[16px] items-center justify-center rounded-[50%] bg-[#FF7330]",onClick:d},c),u.fullScreenBtn?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"group ml-[12px] flex h-[16px] w-[16px] items-center justify-center rounded-[50%] bg-[#34C759]",onClick:p},[(0,a._)("i",{class:(0,n.C_)([[u.fullScreen?"icon-reduction_window_icon":"icon-maximize_window_icon"],"iconfont text-[12px] text-color-white opacity-0 transition-opacity group-hover:opacity-100"])},null,2)])):(0,a.kq)("",!0)])])],2)])}}});const p=(0,t(76911).Z)(d,[["__scopeId","data-v-c8f1aacc"]])},44620:(e,l,t)=>{t.d(l,{Z:()=>F});var o=t(51919),a=t(27076),n=t(11060),s=t(57268),i=t(94209),r=t(29445),c=t(40295),u=t(22509),d=t(68398),p=t(55943),x=t(61045),m=t(19053),g=t(71435),f=t(62190),v=t(12533);const h={class:"timer-bg-img"},b={class:"inline-flex flex-nowrap px-[24px]"},w=[(0,s._)("div",{class:"absolute top-[50%] left-[50%] h-[2px] w-[20px] -translate-y-1/2 -translate-x-1/2 rotate-180 rounded-[2px] bg-color-blue"},null,-1),(0,s._)("div",{class:"absolute top-[50%] left-[50%] h-[20px] w-[2px] -translate-y-1/2 -translate-x-1/2 rounded-[2px] bg-color-blue"},null,-1)],_=["onClick"],y=["src"],k={class:"mx-[24px] mt-[16px] flex items-center justify-between"},C={class:"mr-[50px] flex-shrink-0 text-[14px] text-color-t2"},S={class:"flex flex-1 items-center"},I={class:"flex-1"},U={class:"relative ml-[16px] h-[24px] w-[44px] flex-shrink-0 overflow-hidden rounded-[4px] bg-color-m2 bg-opacity-[0.06] text-center leading-[24px]"},Z=(0,s._)("span",{class:"absolute top-[1px] right-[3px] text-[11px] text-color-t3"},"%",-1),z=(0,s.aZ)({props:{bgImageColor:null,bgMask:null},emits:["on-change-img","update:bgMask"],setup(e,l){let{emit:t}=l;const o=e;p.ZP.use(x.Z);const a=(0,r.iH)(null),n=(0,s.Fl)({get:()=>o.bgMask,set(e){t("update:bgMask",e)}});(0,s.bv)((()=>{new p.ZP(a.value,{scrollX:!0,scrollY:!1,mouseWheel:!0,bounce:!1,momentum:!1})}));const z=(0,r.iH)(!1),W=(0,r.iH)(""),D=async e=>{const l=await j(e.blob);t("on-change-img",{bgImageColor:e.bgColor,bgImage:{large:l,medium:l,small:l}})},M=new m.k,j=async e=>{if(e.size>4194304)throw m.R.fail({message:"文件大小超出限制"}),new Error("limit size");M.loading({message:"上传中",duration:6e4});const[l,t]=await(0,v.E)("user-widget-background",e);if(M.hide(),l)throw m.R.fail({message:"上传失败"}),new Error(l);return t},F=()=>{const e=(0,g.useUserStore)();if(e.isLogin){const e=document.createElement("input");e.type="file",e.click(),e.addEventListener("change",(e=>{var l;const t=(0,f.Uu)(null===(l=e.target.files)||void 0===l?void 0:l[0]);z.value=!0,W.value=t}))}else m.R.warn({message:"请登录后再上传图片",btnText:"去登录",onBtnClick:()=>{e.showLogin(!1)}})};return(e,l)=>{const p=(0,s.up)("van-slider"),x=u.Z;return(0,s.wg)(),(0,s.iD)("section",h,[(0,s._)("div",{ref_key:"wrapperRef",ref:a,class:"overflow-hidden"},[(0,s._)("div",b,[(0,s._)("div",{class:"relative h-[76px] w-[60px] flex-shrink-0 cursor-pointer rounded-[8px] bg-color-m2 bg-opacity-[0.06]",onClick:F},w),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,r.SU)(c.t4),(l=>((0,s.wg)(),(0,s.iD)("div",{key:l.thumbnail,class:"ml-[12px] h-[76px] w-[60px] flex-shrink-0 basis-[60px] cursor-pointer overflow-hidden rounded-[8px]",onClick:e=>(e=>{t("on-change-img",{bgImage:e.bgImage,bgImageColor:""})})(l)},[(0,s._)("img",{src:e.getQiniuImage(l.thumbnail,"default",60)},null,8,y)],8,_)))),128))])],512),(0,s._)("div",k,[(0,s._)("span",C,(0,i.zw)("遮罩"),1),(0,s._)("div",S,[(0,s._)("div",I,[(0,s.Wm)(p,{modelValue:(0,r.SU)(n),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.dq)(n)?n.value=e:null),"bar-height":"4px","active-color":"rgb(var(--color-t1)/1)","inactive-color":"rgb(var(--color-m2) / 0.1)"},null,8,["modelValue"])]),(0,s._)("div",U,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>(0,r.dq)(n)?n.value=e:null),class:"h-full w-full bg-[transparent] pl-[3px] pr-[17px] text-right text-[14px] text-color-t2",type:"number",max:"100",min:"0"},null,512),[[d.nr,(0,r.SU)(n)]]),Z])])]),(0,s.Wm)(x,{show:z.value,"onUpdate:show":l[2]||(l[2]=e=>z.value=e),img:W.value,"onUpdate:img":l[3]||(l[3]=e=>W.value=e),"bg-color":o.bgImageColor,fixed:!1,"max-img-size":1064,title:"图标裁剪",onCropperSuccess:D},null,8,["show","img","bg-color","title"])])}}}),W={class:"timer-modal-sidebar leading-none text-color-t2"},D={class:"mx-[24px]"},M={class:"mt-[24px]"},j={class:"mx-[24px]"},F=(0,s.aZ)({props:{timerStyle:null},emits:["on-change"],setup(e,l){let{emit:t}=l;const u=e,d=(0,s.Fl)({get:()=>u.timerStyle.fontColor,set(e){t("on-change",{fontColor:e})}}),p=(0,s.Fl)({get:()=>"image"===u.timerStyle.bgType?0:1,set(e){t("on-change",{bgType:0===e?"image":"color"})}}),x=(0,s.Fl)({get:()=>u.timerStyle.bgColor,set(e){t("on-change",{bgColor:e})}}),m=(0,s.Fl)({get:()=>u.timerStyle.bgMask,set(e){t("on-change",{bgMask:e})}});return(e,l)=>{const g=n.Z,f=a.Z,v=o.Z;return(0,s.wg)(),(0,s.iD)("section",W,[(0,s.WI)(e.$slots,"default"),(0,s._)("div",D,[(0,s._)("h1",null,(0,i.zw)("字体颜色"),1),(0,s.Wm)(g,{value:(0,r.SU)(d),"onUpdate:value":l[0]||(l[0]=e=>(0,r.dq)(d)?d.value=e:null),"radio-size":20,class:"mt-[14px]",colors:(0,r.SU)(c.O9).font},null,8,["value","colors"])]),(0,s._)("div",M,[(0,s._)("h1",j,(0,i.zw)("背景"),1),(0,s.Wm)(v,{active:(0,r.SU)(p),"onUpdate:active":l[4]||(l[4]=e=>(0,r.dq)(p)?p.value=e:null),"header-class":"mx-[24px]",class:"mt-[14px] h-[180px]","x-space":0},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{title:"图片"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{bgMask:(0,r.SU)(m),"onUpdate:bgMask":l[1]||(l[1]=e=>(0,r.dq)(m)?m.value=e:null),"bg-image-color":u.timerStyle.bgImageColor,onOnChangeImg:l[2]||(l[2]=e=>t("on-change",{bgImage:e.bgImage,bgImageColor:e.bgImageColor}))},null,8,["bgMask","bg-image-color"])])),_:1},8,["title"]),(0,s.Wm)(f,{title:"颜色"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{value:(0,r.SU)(x),"onUpdate:value":l[3]||(l[3]=e=>(0,r.dq)(x)?x.value=e:null),"radio-size":20,class:"mx-[24px] pt-[4px]",colors:(0,r.SU)(c.O9).background},null,8,["value","colors"])])),_:1},8,["title"])])),_:1},8,["active"])])])}}})},42605:(e,l,t)=>{t.d(l,{Z:()=>p});var o=t(57268),a=t(29445);const n={class:"timer-modal h-full w-full"},s={class:"h-[56px] border-b-[1px] border-color-m2 border-opacity-[0.08] text-center text-[16px] leading-[56px] text-color-t1"},i={class:"flex h-[calc(100%_-_56px)] bg-color-b3"},r={class:"sidebar-box hi-scroll relative overflow-x-hidden pb-[10px]"},c={class:"flex h-[78px] items-center justify-center border-t-[1px] border-color-m2 border-opacity-[0.08] bg-color-b4 px-[24px]"},u={class:"flex-grow"},d=(0,o.aZ)({setup(e){const l=(0,a.iH)();return(e,t)=>((0,o.wg)(),(0,o.iD)("section",n,[(0,o._)("div",s,[(0,o.WI)(e.$slots,"title")]),(0,o._)("div",i,[(0,o._)("div",{ref_key:"leftContainerRef",ref:l,class:"relative flex h-full w-[400px] flex-shrink-0 flex-col border-r-[1px] border-color-m2 border-opacity-[0.08]"},[(0,o._)("div",r,[(0,o.WI)(e.$slots,"left",{containerRef:l.value})]),(0,o._)("div",c,[(0,o.WI)(e.$slots,"footer")])],512),(0,o._)("div",u,[(0,o.WI)(e.$slots,"right")])])]))}});const p=(0,t(76911).Z)(d,[["__scopeId","data-v-93b24a6c"]])},28220:(e,l,t)=>{t.d(l,{Z:()=>v});var o=t(51919),a=t(27076),n=t(57268),s=t(29445),i=t(94209);const r=e=>((0,n.dD)("data-v-ef3dd824"),e=e(),(0,n.Cn)(),e),c={class:"timer-preview icon-home-large h-full pt-[16px] book:icon-home-medium pad:icon-home-small"},u={class:"h-full"},d={class:"flex items-center justify-center font-ali-55 leading-none text-color-t3"},p=r((()=>(0,n._)("span",{class:"mx-[6px] inline-block h-[4px] w-[4px] rounded-[50%] bg-color-t3"},null,-1))),x={class:"flex h-[calc(100%-14px)] flex-col items-center justify-center"},m=r((()=>(0,n._)("div",{class:"holder h-[100px] shrink"},null,-1))),g=r((()=>(0,n._)("div",{class:"holder h-[200px] shrink"},null,-1))),f=(0,n.aZ)({props:{sizes:null,defaultSize:null},setup(e){const l=e,t=(0,s.iH)(0),r={s:{matrix:"1x2",name:"小"},m:{matrix:"2x2",name:"中"},l:{matrix:"2x4",name:"大"}},f=(0,n.Fl)((()=>l.sizes.map((e=>({key:e,...r[e]})))));return(0,n.YP)((()=>l.defaultSize),(()=>{const e=f.value.findIndex((e=>e.key===l.defaultSize));e>-1&&(t.value=e)}),{immediate:!0}),(e,l)=>{const r=a.Z,v=o.Z;return(0,n.wg)(),(0,n.iD)("section",c,[(0,n.Wm)(v,{active:t.value,"onUpdate:active":l[0]||(l[0]=e=>t.value=e),"header-class":"min-w-[240px]  m-auto overflow-hidden rounded-[16px]","header-item-class":"rounded-[16px] !h-[24px]",class:"h-full","x-space":0},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(f),(l=>((0,n.wg)(),(0,n.j4)(r,{key:l.key,title:l.name},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("div",d,[(0,n.Uk)((0,i.zw)("预览")+" ",1),p,(0,n.Uk)(" "+(0,i.zw)(l.matrix),1)]),(0,n._)("div",x,[m,(0,n._)("div",{class:(0,i.C_)(["item shrink-0 grow-0",["item-"+l.key]])},[(0,n.WI)(e.$slots,"item",{size:l.key})],2),g])])])),_:2},1032,["title"])))),128))])),_:3},8,["active"])])}}});const v=(0,t(76911).Z)(f,[["__scopeId","data-v-ef3dd824"]])}}]);