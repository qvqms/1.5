"use strict";(globalThis.webpackChunkinfinity_hitab_client=globalThis.webpackChunkinfinity_hitab_client||[]).push([[4445],{7946:(e,o,t)=>{t.r(o);t(57334);var l=t(66155),n=t(68398),r=t(69753),c=t(36683),s=t(57268),i=t(29445),a=t(71390),u=t(89062),d=t(19102);var p=t(26199),x=t(94209),h=t(31785),v=t(16355);const f={class:"flex w-[210px] items-center"},g=(e=>((0,s.dD)("data-v-77fed985"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("div",{class:"icon h-[16px] w-[16px] shrink-0 bg-cover"},null,-1))),w=["readonly","disabled","value"],b={class:"w-[30px] text-right font-ali-75 text-color-t3"},m=(0,s.aZ)({props:{group:null,index:null},setup(e,o){let{expose:t}=o;const l=e,r=(0,h.useTodoStore)(),c=(0,i.iH)(!1),u=(0,i.iH)({edit:{text:"重命名",handler(){Z()}},remove:{text:"删除",handler(){l.group.children.length>0?v.u.open({title:"提醒",message:"删除分组将同时删除分组下的所有待办事项。",okText:"删除",onOk:()=>{r.deleteGroup(l.group.id)}}):r.deleteGroup(l.group.id)}}}),{group:d,index:m}=(0,i.BK)(l),{activeGroupIndex:S,activeSearch:_}=(0,a.Iz)(),U=(0,i.iH)(null),{editMode:y,onClick:k,onBlur:C}=(0,a.Yt)(),Z=()=>{var e;k(m.value),null===(e=U.value)||void 0===e||e.focus()};return t({focus:Z}),(e,o)=>{const t=p.Z;return(0,s.wg)(),(0,s.iD)("section",{class:(0,x.C_)([[(0,i.SU)(y)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":(0,i.SU)(m)!==(0,i.SU)(S)||(0,i.SU)(_)?"cursor-pointer bg-color-none":"active cursor-auto !bg-color-white dark:!bg-opacity-20"],"group relative mt-[4px] flex h-[36px] w-[260px] items-center justify-between rounded-[8px] px-[8px] leading-none transition-[background-color,box-shadow] hover:bg-color-m2 hover:bg-opacity-[0.06]"])},[(0,s._)("div",f,[g,(0,s._)("input",{ref_key:"inputRef",ref:U,class:(0,x.C_)(["name-input text-dot select-none border-0 bg-color-none px-[8px] font-ali-65 text-color-t2 outline-0",[(0,i.SU)(y)?" cursor-auto bg-color-m2 bg-opacity-[0.06]":"cursor-pointer bg-color-none"]]),readonly:!(0,i.SU)(y),disabled:(0,i.SU)(m)!==(0,i.SU)(S)||(0,i.SU)(_),spellcheck:"false",maxlength:"100",value:(0,i.SU)(d).name,type:"text",onKeyup:o[0]||(o[0]=(0,n.D2)((e=>(0,i.SU)(C)(e,(0,i.SU)(d))),["enter"])),onBlur:o[1]||(o[1]=e=>(0,i.SU)(C)(e,(0,i.SU)(d))),onClick:o[2]||(o[2]=e=>(0,i.SU)(k)((0,i.SU)(m)))},null,42,w)]),(0,s.Wm)(t,{show:c.value,"onUpdate:show":o[3]||(o[3]=e=>c.value=e),class:"",options:(0,i.SU)(u)},{reference:(0,s.w5)((()=>[(0,s._)("button",{class:(0,x.C_)(c.value?"block":(0,i.SU)(y)?"hidden":"hidden  group-hover:block")},[(0,s._)("i",{class:(0,x.C_)([[c.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","options"]),(0,s._)("span",b,(0,x.zw)((0,i.SU)(d).children.length),1)],2)}}});var S=t(76911);const _=(0,S.Z)(m,[["__scopeId","data-v-77fed985"]]),U={class:"todo-modal-group p-[20px] pr-0"},y={class:"custom-group hi-scroll mt-[24px] pb-[12px]"},k=[(e=>((0,s.dD)("data-v-5c5d26a8"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("i",{class:"iconfont icon-add_icon text-[16px] text-color-white"},null,-1)))],C=(0,s.aZ)({setup(e){const{itemRefs:o,setItemRef:t}=(()=>{const e=(0,i.iH)([]);return(0,s.Xn)((()=>{e.value=[]})),{setItemRef:o=>{o&&e.value.push(o)},itemRefs:e}})(),l=()=>{u(),(0,s.Y3)((()=>{p(o.value)}))},{searchValue:n,customGroup:r,clickGroup:c,addGroup:u,editActive:p}=(0,a.Iz)();return(e,o)=>{const a=d.Z;return(0,s.wg)(),(0,s.iD)("section",U,[(0,s.Wm)(a,{value:(0,i.SU)(n),"onUpdate:value":o[0]||(o[0]=e=>(0,i.dq)(n)?n.value=e:null),icon:"icon-magnifier_icon  !text-color-t2",placeholder:"搜索","always-show-close-btn":"",class:"mt-[36px] w-[260px] flex-1"},null,8,["value","placeholder"]),(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,i.SU)(r),((e,o)=>((0,s.wg)(),(0,s.j4)(_,{ref_for:!0,ref:(0,i.SU)(t),key:e.id,group:e,index:o,onClick:e=>(0,i.SU)(c)(o)},null,8,["group","index","onClick"])))),128))]),(0,s._)("div",{class:"absolute bottom-[20px] left-[20px] flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-[8px] bg-color-t3 leading-none",onClick:l},k)])}}}),Z=(0,S.Z)(C,[["__scopeId","data-v-5c5d26a8"]]);var D=t(70355),T=t(1578);const W={class:"todo-list-item group flex w-full px-[16px] pt-[10px]"},z={class:"relative ml-[12px] flex-grow border-b-[1px] border-color-m2 border-opacity-[0.08] pb-[10px]"},H={class:"w-full pr-[10px]"},I=["value","readonly"],j={class:"mt-[8px] flex h-[22px] w-[46px] justify-center"},Y={class:"hi-select-menu overflow-hidden rounded-[8px] bg-color-b5 p-[4px] shadow-popover"},G=["onClick"],K=(0,s.aZ)({props:{todo:null},setup(e){const o=e,t=(0,h.useTodoStore)(),l=(0,s.Fl)((()=>({remove:{text:"删除",handler(){n.value=!1,t.deleteTodo(o.todo.id)}}}))),n=(0,i.iH)(!1),{todo:r}=(0,i.BK)(o),{clickFinish:c,inputChange:u,editMode:d,onBlur:v,onClick:f}=(0,a.gT)();return(e,o)=>{const t=T.Z,a=p.Z,h=(0,s.Q2)("autoheight");return(0,s.wg)(),(0,s.iD)("section",W,[(0,s.Wm)(t,{checked:(0,i.SU)(r).finished,class:"mt-[8px]",onClick:o[0]||(o[0]=e=>(0,i.SU)(c)((0,i.SU)(r)))},null,8,["checked"]),(0,s._)("div",z,[(0,s._)("div",H,[(0,s.wy)((0,s._)("textarea",{value:(0,i.SU)(r).content,rows:"1",spellcheck:"false",readonly:!(0,i.SU)(d),class:(0,x.C_)([[(0,i.SU)(r).finished?"text-color-t3":"text-color-t2",(0,i.SU)(d)?"bg-color-m2 bg-opacity-[0.06]":" bg-color-none"],"todo-content ml-[-8px] w-full cursor-auto resize-none break-all rounded-[8px] border-0 py-[6px] px-[8px] align-top font-ali-65 leading-[23px] outline-0"]),maxlength:"1000",onBlur:o[1]||(o[1]=e=>(0,i.SU)(v)(e,(0,i.SU)(r))),onClick:o[2]||(o[2]=function(){return(0,i.SU)(f)&&(0,i.SU)(f)(...arguments)}),onInput:o[3]||(o[3]=e=>(0,i.SU)(u)(e.target,115))},null,42,I),[[h,{max:115,id:(0,i.SU)(r).id}]])])]),(0,s._)("div",j,[(0,s.Wm)(a,{show:n.value,"onUpdate:show":o[4]||(o[4]=e=>n.value=e),"show-refrence":(0,i.SU)(d)},{default:(0,s.w5)((()=>[(0,s._)("div",Y,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,i.SU)(l),((e,o)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:o},[e?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"h-[32px] w-full cursor-pointer rounded-[4px] px-[16px] text-left text-[14px] text-color-t2 hover:bg-color-m2 hover:bg-opacity-[0.06] hover:text-color-t1 not-last:mb-[4px]",onClick:o=>e.handler()},(0,x.zw)(e.text),9,G)):(0,s.kq)("",!0)],64)))),128))])])])),reference:(0,s.w5)((()=>[(0,s._)("button",{class:(0,x.C_)(n.value?"block":"hidden  group-hover:block")},[(0,s._)("i",{class:(0,x.C_)([[n.value?"text-opacity-80":"text-opacity-60 hover:text-opacity-80"],"iconfont icon-single_hover_icon text-[20px] text-color-t1"])},null,2)],2)])),_:1},8,["show","show-refrence"])])])}}}),B={class:"todo-modal-content flex flex-col justify-between"},R={class:"max-h-[calc(100%_-_76px)] grow"},O={class:"flex h-[64px] items-center justify-between border-b-[1px] border-color-m2 border-opacity-[0.08] px-[16px]"},q={class:"text-dot font-ali-75 text-[18px] text-color-t1"},F={class:"flex h-[40px] w-[360px] items-center justify-between rounded-[8px] bg-color-m2 bg-opacity-[0.08] pl-[12px] pr-[6px]"},M={class:"flex items-center"},$={class:"text-color-t3"},A=(e=>((0,s.dD)("data-v-429b66fe"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("div",{class:"mx-[4px] h-[4px] w-[4px] rounded-[50%] bg-color-t3"},null,-1))),P={key:0,class:"add-todo bottom-0 h-[76px] w-full flex-shrink-0 p-[16px]"},Q=(0,s.aZ)({setup(e){const o=(0,i.iH)(),t=(0,h.useTodoStore)(),{title:l,completed:r,finishedShow:c,changeFinishedShow:u,clearCompleted:p,list:v,newTodoContent:f,addTodo:g}=(0,a.TW)();return(e,a)=>{const h=D.Z,w=d.Z;return(0,s.wg)(),(0,s.iD)("section",B,[(0,s._)("div",R,[(0,s._)("div",O,[(0,s._)("div",q,(0,x.zw)((0,i.SU)(l)),1),(0,s._)("div",F,[(0,s._)("div",M,[(0,s._)("span",$,(0,x.zw)((0,i.SU)(r))+" "+(0,x.zw)("已完成"),1),A,(0,s._)("span",{class:"cursor-pointer p-[4px] text-color-todo-t2",onClick:a[0]||(a[0]=function(){return(0,i.SU)(p)&&(0,i.SU)(p)(...arguments)})},(0,x.zw)("清理"),1)]),(0,s.Wm)(h,{class:"h-[28px] w-auto rounded-[4px] px-[16px]",type:"primary",onClick:(0,i.SU)(u)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,x.zw)((0,i.SU)(c)?"隐藏":"显示"),1)])),_:1},8,["onClick"])])]),(0,s._)("div",{ref_key:"wrapper",ref:o,class:"list hi-scroll relative pt-[8px]"},[(0,s.Wm)(n.W3,{name:(0,i.SU)(t).needTransition?"todo-list":"list",class:"",tag:"div"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,i.SU)(v),(e=>((0,s.wg)(),(0,s.j4)(K,{key:e.id,todo:e},null,8,["todo"])))),128))])),_:1},8,["name"])],512)]),"number"==typeof(0,i.SU)(t).activeGroupIndex?((0,s.wg)(),(0,s.iD)("div",P,[(0,s.Wm)(w,{value:(0,i.SU)(f),"onUpdate:value":a[1]||(a[1]=e=>(0,i.dq)(f)?f.value=e:null),icon:"icon-pen_icon !text-color-todo-t2",placeholder:"添加待办",class:"","no-clear-btn":"",onKeyup:a[2]||(a[2]=(0,n.D2)((e=>(0,i.SU)(g)(o.value)),["enter"]))},null,8,["value","placeholder"])])):(0,s.kq)("",!0)])}}}),V=(0,S.Z)(Q,[["__scopeId","data-v-429b66fe"]]);var X=t(22469);const E={class:"content flex h-full w-full"},J=(0,s.aZ)({setup(e){const{onCloseModal:o}=(0,a.dd)(),{fullScreen:t,setSullScreen:l}=(0,u.O)(),{show:n}=(0,a.dd)();return(0,s.YP)(t,(()=>{(0,s.Y3)((()=>{X.U.cxecutor()}))})),(e,a)=>{const u=c.Z,d=r.Z;return(0,s.wg)(),(0,s.j4)(d,{class:"widget-todo-modal",ani:"fade",show:(0,i.SU)(n)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"","full-screen":(0,i.SU)(t),onOnClose:(0,i.SU)(o),onOnFullscreen:a[0]||(a[0]=e=>(0,i.SU)(l)(e))},{default:(0,s.w5)((()=>[(0,s._)("div",E,[(0,s.Wm)(Z,{class:"h-full w-[300px] border-r-[1px] border-color-t1 border-opacity-[0.08] bg-color-b3"}),(0,s.Wm)(V,{class:"h-full grow"})])])),_:1},8,["full-screen","onOnClose"])])),_:1},8,["show"])}}});var L=t(94974),N=t(58693),ee=t(62190);(()=>{const e=(0,ee.em)(),o=(0,n.ri)(J);o.directive("autoheight",{mounted:(e,o)=>{const{max:t,min:l,id:n}=o.value;(0,X.$)(e,t,l),X.U.register(n,(()=>(0,X.$)(e,t,l)))},unmounted(e,o){const{id:t}=o.value;X.U.unRegister(t)},updated:(e,o)=>{const{max:t,min:l}=o.value;(0,X.$)(e,t,l)}}),(0,N.f)(o),o.use(L.M),o.use(l.Z),o.mount(e)})()}}]);